-- Load OrionLib
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()
if not OrionLib then
    error("Failed to load the OrionLib library")
    return
end

-- Create window and tab
local Window = OrionLib:MakeWindow({
    Name = "Reroll Script",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "WendelCfg",
    IntroEnabled = false
})

local RollerTab = Window:MakeTab({
    Name = "Roll-Tab",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Define a function to handle rerolling
local function reroll(remoteName, id, desiredIds, printMessage)
    local c = false
    repeat
        local d = {[1] = 400001}
        local e = game:GetService("ReplicatedStorage").Remotes[remoteName]:InvokeServer(unpack(d))
        wait(0.1)
        if not table.find(desiredIds, tostring(e[id])) then
            print("Unknown reroll found! : ".. tostring(e[id]))
            c = true
        end
        if table.find(desiredIds, tostring(e[id])) then
            local f = "None"
            if tostring(e[id]) == desiredIds[1] then
                f = "Legendary"
            elseif tostring(e[id]) == desiredIds[2] then
                f = "Rainbow"
            end
            print("!! REROLL FOUND!! : ".. f)
            c = true
        end
    until c
    print("Script stopped!")
end

-- Add buttons to the tab
local buttons = {
    {Name = "Reroll Legendary Mask", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410004", "410005"}},
    {Name = "Reroll Mythic Mask", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410005"}},
    {Name = "Reroll Legendary Awakening", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410009", "410010"}},
    {Name = "Reroll Mythic Awakening", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410010"}},
    {Name = "Reroll Legendary Ornament", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410014", "410015"}},
    {Name = "Reroll Mythic Ornament", remoteName = "RerollOrnament", id = "ornamentId", desiredIds = {"410015"}},
    {Name = "Reroll Legendary Trail", remoteName = "RerollTrail", id = "trailId", desiredIds = {"410019", "410020"}},
    {Name = "Reroll Mythic Trail", remoteName = "RerollTrail", id = "trailId", desiredIds = {"410020"}},
}

for _, button in pairs(buttons) do
    local b = RollerTab:AddButton({
        Name = button.Name,
        Callback = function()
            reroll(button.remoteName, button.id, button.desiredIds, "!! REROLL FOUND!! : ")
        end
    })
end
